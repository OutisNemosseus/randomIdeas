<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¤šæ ‡ç­¾é¡µåŠŸèƒ½æ”¹è¿›ç‰ˆè¯¦è§£ - ç¬¬äºŒç‰ˆ (commit 91a5060)</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
      background: #1e1e1e; color: #d4d4d4;
      padding: 40px;
      line-height: 1.8;
    }
    h1 {
      color: #4ec9b0;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 3px solid #3e3e42;
    }
    h2 {
      color: #569cd6;
      margin-top: 40px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #3e3e42;
    }
    h3 {
      color: #dcdcaa;
      margin-top: 30px;
      margin-bottom: 15px;
    }
    h4 {
      color: #c586c0;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    ul, ol {
      margin-left: 30px;
      margin-bottom: 15px;
    }
    li {
      margin-bottom: 10px;
    }
    code {
      background: #2d2d30;
      padding: 2px 8px;
      border-radius: 4px;
      color: #ce9178;
      font-family: 'Consolas', monospace;
      font-size: 0.95em;
    }
    pre {
      background: #1e1e1e;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
      border-left: 4px solid #569cd6;
    }
    pre code {
      background: none;
      padding: 0;
      color: #d4d4d4;
    }
    .section {
      background: #252526;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .important {
      background: #3e2f1f;
      border-left: 4px solid #ce9178;
      padding: 15px;
      margin: 15px 0;
      border-radius: 6px;
    }
    .success {
      background: #1f3e2f;
      border-left: 4px solid #4ec9b0;
      padding: 15px;
      margin: 15px 0;
      border-radius: 6px;
    }
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    .comparison .column {
      background: #252526;
      padding: 20px;
      border-radius: 8px;
    }
    .old-version {
      border: 2px solid #f48771;
    }
    .new-version {
      border: 2px solid #4ec9b0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border: 1px solid #3e3e42;
    }
    th {
      background: #2d2d30;
      color: #569cd6;
      font-weight: bold;
    }
    tr:nth-child(even) {
      background: #252526;
    }
  </style>
</head>
<body>

<h1>ğŸ“š å¤šæ ‡ç­¾é¡µåŠŸèƒ½æ”¹è¿›ç‰ˆè¯¦è§£ï¼ˆç¬¬äºŒç‰ˆï¼‰</h1>

<div class="success">
  <strong>âœ¨ æ–‡æ¡£è¯´æ˜</strong>
  <p>æœ¬æ–‡æ¡£è¯¦ç»†è®²è§£ commit 91a5060 ä¸­å¯¹å¤šæ ‡ç­¾é¡µç³»ç»Ÿçš„UI/UXæ”¹è¿›ã€‚é‡ç‚¹æ˜¯å†…è”é‡å‘½åå’Œä¿å­˜æŒ‰é’®é‡æ–°å®šä½ã€‚</p>
  <p><strong>å‰ç½®æ–‡æ¡£ï¼š</strong>è¯·å…ˆé˜…è¯»ç¬¬ä¸€ç‰ˆæ–‡æ¡£äº†è§£åŸºç¡€å®ç°ï¼Œæœ¬æ–‡æ¡£åªè®²è§£æ”¹è¿›éƒ¨åˆ†ã€‚</p>
</div>

<h2>ğŸ¯ æ”¹è¿›ç›®æ ‡</h2>

<div class="section">
  <h3>ç¬¬ä¸€ç‰ˆçš„é—®é¢˜ï¼š</h3>
  <ul>
    <li>âŒ æ–‡ä»¶åè¾“å…¥æ¡†åœ¨æœ€å³ä¾§ï¼Œè¿œç¦»æ ‡ç­¾</li>
    <li>âŒ ä¿å­˜æŒ‰é’®ä¹Ÿåœ¨æœ€å³ä¾§ï¼Œä¸å¤Ÿæ˜æ˜¾</li>
    <li>âŒ é‡å‘½åéœ€è¦åœ¨è¾“å…¥æ¡†æ“ä½œï¼Œä¸æ ‡ç­¾åˆ†ç¦»</li>
    <li>âŒ ç”¨æˆ·éœ€è¦åœ¨æ ‡ç­¾å’Œè¾“å…¥æ¡†ä¹‹é—´åˆ‡æ¢è§†çº¿</li>
    <li>âŒ è®¤çŸ¥è´Ÿæ‹…è¾ƒé‡</li>
  </ul>

  <h3>ç¬¬äºŒç‰ˆçš„æ”¹è¿›ï¼š</h3>
  <ul>
    <li>âœ… åŒå‡»æ ‡ç­¾åç›´æ¥å†…è”ç¼–è¾‘ï¼ˆinline editingï¼‰</li>
    <li>âœ… ç§»é™¤ç‹¬ç«‹çš„æ–‡ä»¶åè¾“å…¥æ¡†</li>
    <li>âœ… ä¿å­˜æŒ‰é’®ç§»åˆ°æ ‡ç­¾æ—è¾¹ï¼ˆå·¦ä¾§ï¼‰</li>
    <li>âœ… ä¿å­˜æŒ‰é’®ä½¿ç”¨ç»¿è‰²ï¼Œæ›´æ˜¾çœ¼</li>
    <li>âœ… æ‰€æœ‰æ ‡ç­¾ç›¸å…³æ“ä½œé›†ä¸­åœ¨ä¸€èµ·</li>
    <li>âœ… æ›´ç¬¦åˆç°ä»£IDEçš„äº¤äº’æ¨¡å¼ï¼ˆVS Code, Chromeç­‰ï¼‰</li>
  </ul>
</div>

<h2>ğŸ“Š UI å¯¹æ¯”</h2>

<div class="comparison">
  <div class="column old-version">
    <h3 style="color: #f48771;">âŒ ç¬¬ä¸€ç‰ˆå¸ƒå±€</h3>
    <pre><code>[Tab1] [Tab2] [Tab3] [+]  <-->  [filename.c] [ğŸ’¾ Save]
  æ ‡ç­¾åŒºåŸŸ                              å³ä¾§æ§ä»¶åŒº
ï¼ˆç”¨æˆ·è¦åœ¨ä¸¤ä¸ªåŒºåŸŸä¹‹é—´åˆ‡æ¢è§†çº¿ï¼‰</code></pre>
  </div>
  <div class="column new-version">
    <h3 style="color: #4ec9b0;">âœ… ç¬¬äºŒç‰ˆå¸ƒå±€</h3>
    <pre><code>[Tab1] [Tab2] [Tab3] [+] [ğŸ’¾ Save]
  æ‰€æœ‰æ ‡ç­¾ç›¸å…³æ“ä½œé›†ä¸­åœ¨ä¸€èµ·
ï¼ˆåŒå‡»æ ‡ç­¾åç›´æ¥é‡å‘½åï¼‰</code></pre>
  </div>
</div>

<h2>ğŸ’» ä»£ç æ”¹è¿›è¯¦è§£</h2>

<h3>æ”¹è¿› 1ï¼šç§»é™¤æ–‡ä»¶åè¾“å…¥æ¡†</h3>

<div class="section">
  <h4>åˆ é™¤çš„ CSSï¼š</h4>
  <pre><code>// åˆ é™¤ï¼š
.save-controls {
  display: flex; align-items: center; gap: 0.5rem;
  margin-left: auto;  // è¿™ä¼šæŠŠæ§ä»¶æ¨åˆ°æœ€å³è¾¹
}
.filename-input { ... }  // æ•´ä¸ªè¾“å…¥æ¡†æ ·å¼
.filename-input:focus { ... }</code></pre>

  <h4>åˆ é™¤çš„ HTMLï¼š</h4>
  <pre><code>&lt;!-- åˆ é™¤ï¼š --&gt;
&lt;div class="save-controls"&gt;
  &lt;input type="text" class="filename-input" id="filenameInput"
         placeholder="filename.c" value="main.c"&gt;
  &lt;button id="saveBtn" disabled&gt;ğŸ’¾ Save&lt;/button&gt;
&lt;/div&gt;</code></pre>

  <h4>åˆ é™¤çš„ JavaScriptï¼š</h4>
  <pre><code>// åˆ é™¤æ•´ä¸ª change äº‹ä»¶ç›‘å¬å™¨ï¼š
document.getElementById('filenameInput').addEventListener('change', (e) => {
  const currentTab = tabs.find(t => t.id === currentTabId);
  if (currentTab) {
    currentTab.name = e.target.value || 'untitled.c';
    renderTabs();
  }
});

// åˆ é™¤ updateFilenameInput() å‡½æ•°ï¼š
function updateFilenameInput() {
  const currentTab = tabs.find(t => t.id === currentTabId);
  if (currentTab) {
    document.getElementById('filenameInput').value = currentTab.name;
  }
}</code></pre>

  <p><strong>åˆ é™¤åŸå› ï¼š</strong> åŠŸèƒ½è¢«å†…è”é‡å‘½åå–ä»£ï¼Œä¸å†éœ€è¦å•ç‹¬çš„è¾“å…¥æ¡†</p>
</div>

<h3>æ”¹è¿› 2ï¼šä¿å­˜æŒ‰é’®é‡æ–°å®šä½</h3>

<div class="section">
  <h4>æ–°å¢ CSSï¼š</h4>
  <pre><code>.save-btn {
  margin-left: 0.5rem;        // ä¸ + æŒ‰é’®çš„é—´è·
  padding: 0.4rem 0.9rem;
  background: #166534;         // æ·±ç»¿è‰²
  border-color: #15803d;       // ç»¿è‰²è¾¹æ¡†
}
.save-btn:hover { background: #15803d; }  // æ‚¬åœæ—¶å˜äº®
.save-btn:disabled {
  background: #1f2937;         // ç¦ç”¨æ—¶ç°è‰²
  border-color: #334155;
}</code></pre>

  <h4>é¢œè‰²é€‰æ‹©è¯´æ˜ï¼š</h4>
  <table>
    <tr>
      <th>çŠ¶æ€</th>
      <th>é¢œè‰²</th>
      <th>è‰²å€¼</th>
      <th>å«ä¹‰</th>
    </tr>
    <tr>
      <td>æ­£å¸¸</td>
      <td style="background: #166534; color: white;">æ·±ç»¿è‰²</td>
      <td>#166534</td>
      <td>ä¿å­˜æ˜¯å®‰å…¨æ“ä½œï¼Œä½¿ç”¨ç»¿è‰²</td>
    </tr>
    <tr>
      <td>æ‚¬åœ</td>
      <td style="background: #15803d; color: white;">äº®ç»¿è‰²</td>
      <td>#15803d</td>
      <td>æä¾›è§†è§‰åé¦ˆ</td>
    </tr>
    <tr>
      <td>ç¦ç”¨</td>
      <td style="background: #1f2937; color: white;">æ·±ç°è‰²</td>
      <td>#1f2937</td>
      <td>ä¸å¯ç”¨çŠ¶æ€</td>
    </tr>
  </table>

  <h4>ä¿®æ”¹çš„ HTMLï¼š</h4>
  <pre><code>&lt;div class="tabs-container"&gt;
  &lt;!-- æ ‡ç­¾ä¼šåŠ¨æ€æ¸²æŸ“åˆ°è¿™é‡Œ --&gt;
  &lt;button class="tab-add" onclick="addNewTab()"&gt;+&lt;/button&gt;
  &lt;button class="save-btn" id="saveBtn" disabled&gt;ğŸ’¾ Save&lt;/button&gt;  &lt;!-- ç§»åˆ°è¿™é‡Œï¼ --&gt;
&lt;/div&gt;</code></pre>

  <p><strong>ä½ç½®å˜åŒ–ï¼š</strong></p>
  <ul>
    <li><strong>ä¹‹å‰ï¼š</strong> åœ¨ <code>.save-controls</code> div é‡Œï¼Œé€šè¿‡ <code>margin-left: auto</code> æ¨åˆ°æœ€å³è¾¹</li>
    <li><strong>ç°åœ¨ï¼š</strong> ç›´æ¥æ”¾åœ¨æ ‡ç­¾å®¹å™¨é‡Œï¼Œç´§è·Ÿåœ¨ <code>+</code> æŒ‰é’®åé¢</li>
    <li><strong>æ•ˆæœï¼š</strong> ä¿å­˜æŒ‰é’®ä¸æ ‡ç­¾åœ¨åŒä¸€è§†è§‰åŒºåŸŸï¼Œæ“ä½œæ›´é›†ä¸­</li>
  </ul>
</div>

<h3>æ”¹è¿› 3ï¼šå†…è”é‡å‘½ååŠŸèƒ½</h3>

<div class="section">
  <h4>æ–°å¢å…¨å±€å˜é‡ï¼š</h4>
  <pre><code>let editingTabId = null;  // è·Ÿè¸ªå½“å‰æ­£åœ¨ç¼–è¾‘çš„æ ‡ç­¾ID</code></pre>
  <ul>
    <li><code>null</code> è¡¨ç¤ºæ²¡æœ‰æ ‡ç­¾åœ¨ç¼–è¾‘çŠ¶æ€</li>
    <li>æ•°å­—è¡¨ç¤ºæ­£åœ¨ç¼–è¾‘çš„æ ‡ç­¾ID</li>
  </ul>

  <h4>æ–°å¢ CSSï¼š</h4>
  <pre><code>.tab-name-input {
  background: #111827;           // æ·±è‰²èƒŒæ™¯
  border: 1px solid #3b82f6;    // è“è‰²è¾¹æ¡†ï¼ˆç„¦ç‚¹çŠ¶æ€ï¼‰
  border-radius: 3px;
  color: #e5e7eb;
  padding: 2px 4px;
  font-size: 0.85rem;
  font-family: inherit;          // ç»§æ‰¿æ ‡ç­¾å­—ä½“
  width: 120px;
}
.tab-name-input:focus {
  outline: none;                 // ç§»é™¤é»˜è®¤å¤–æ¡†
}</code></pre>
</div>

<h3>æ”¹è¿› 4ï¼šä¿®æ”¹ renderTabs() å‡½æ•°</h3>

<div class="section">
  <h4>å…³é”®æ”¹åŠ¨ï¼š</h4>
  <pre><code>function renderTabs() {
  const container = document.querySelector('.tabs-container');
  const addButton = container.querySelector('.tab-add');
  const saveButton = container.querySelector('.save-btn');  // â† æ–°å¢ï¼šè·å–ä¿å­˜æŒ‰é’®å¼•ç”¨

  // åˆ é™¤æ‰€æœ‰æ ‡ç­¾ï¼ˆä½†ä¿ç•™ + æŒ‰é’®å’Œä¿å­˜æŒ‰é’®ï¼‰
  const tabElements = container.querySelectorAll('.tab');
  tabElements.forEach(el => el.remove());

  // ä¸ºæ¯ä¸ªæ ‡ç­¾åˆ›å»º DOM å…ƒç´ 
  tabs.forEach(tab => {
    const tabEl = document.createElement('div');
    tabEl.className = 'tab' + (tab.id === currentTabId ? ' active' : '');
    tabEl.dataset.tabId = tab.id;

    // â† å…³é”®æ”¹åŠ¨ï¼šæ ¹æ®æ˜¯å¦åœ¨ç¼–è¾‘çŠ¶æ€æ¸²æŸ“ä¸åŒå†…å®¹
    if (tab.id === editingTabId) {
      // ç¼–è¾‘æ¨¡å¼ï¼šæ˜¾ç¤ºè¾“å…¥æ¡†
      tabEl.innerHTML = `
        &lt;input type="text" class="tab-name-input" value="${tab.name}"
               onblur="finishRenaming(${tab.id})"
               onkeydown="handleRenameKeydown(event, ${tab.id})"
               id="rename-input-${tab.id}"&gt;
        &lt;span class="tab-close" onclick="closeTab(${tab.id}, event)"&gt;Ã—&lt;/span&gt;
      `;
    } else {
      // æ­£å¸¸æ¨¡å¼ï¼šæ˜¾ç¤ºæ ‡ç­¾åï¼ŒåŒå‡»å¯ç¼–è¾‘
      tabEl.innerHTML = `
        &lt;span class="tab-name" ondblclick="startRenaming(${tab.id}, event)"&gt;${tab.name}&lt;/span&gt;
        &lt;span class="tab-close" onclick="closeTab(${tab.id}, event)"&gt;Ã—&lt;/span&gt;
      `;
    }

    // ç‚¹å‡»æ ‡ç­¾åˆ‡æ¢ï¼ˆä½†ä¸åŒ…æ‹¬è¾“å…¥æ¡†å’Œå…³é—­æŒ‰é’®ï¼‰
    tabEl.onclick = (e) => {
      if (!e.target.classList.contains('tab-close') &&
          !e.target.classList.contains('tab-name-input')) {  // â† æ–°å¢æ¡ä»¶
        switchTab(tab.id);
      }
    };
    container.insertBefore(tabEl, addButton);
  });

  // â† æ–°å¢ï¼šè‡ªåŠ¨èšç„¦åˆ°é‡å‘½åè¾“å…¥æ¡†
  if (editingTabId !== null) {
    setTimeout(() => {
      const input = document.getElementById(`rename-input-${editingTabId}`);
      if (input) {
        input.focus();    // èšç„¦
        input.select();   // å…¨é€‰æ–‡æœ¬ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥è¾“å…¥
      }
    }, 0);  // ä½¿ç”¨ setTimeout ç¡®ä¿ DOM æ›´æ–°åå†èšç„¦
  }
}</code></pre>

  <h4>è¯¦ç»†è§£é‡Šï¼š</h4>

  <p><strong>1. æ¡ä»¶æ¸²æŸ“ï¼ˆç¬¬ 12-25 è¡Œï¼‰</strong></p>
  <ul>
    <li><code>if (tab.id === editingTabId)</code> - æ£€æŸ¥å½“å‰æ ‡ç­¾æ˜¯å¦å¤„äºç¼–è¾‘çŠ¶æ€</li>
    <li><strong>ç¼–è¾‘æ¨¡å¼ï¼š</strong>
      <ul>
        <li>æ¸²æŸ“ <code>&lt;input&gt;</code> å…ƒç´ ä»£æ›¿ <code>&lt;span&gt;</code></li>
        <li><code>value="${tab.name}"</code> - é¢„å¡«å……å½“å‰æ–‡ä»¶å</li>
        <li><code>onblur="finishRenaming(...)"</code> - å¤±å»ç„¦ç‚¹æ—¶å®Œæˆé‡å‘½å</li>
        <li><code>onkeydown="handleRenameKeydown(...)"</code> - å¤„ç†é”®ç›˜äº‹ä»¶</li>
        <li><code>id="rename-input-${tab.id}"</code> - å”¯ä¸€IDï¼Œç”¨äºåç»­èšç„¦</li>
      </ul>
    </li>
    <li><strong>æ­£å¸¸æ¨¡å¼ï¼š</strong>
      <ul>
        <li>æ¸²æŸ“ <code>&lt;span&gt;</code> æ˜¾ç¤ºæ–‡ä»¶å</li>
        <li><code>ondblclick="startRenaming(...)"</code> - åŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼</li>
      </ul>
    </li>
  </ul>

  <p><strong>2. ç‚¹å‡»äº‹ä»¶è¿‡æ»¤ï¼ˆç¬¬ 29 è¡Œï¼‰</strong></p>
  <ul>
    <li><code>!e.target.classList.contains('tab-name-input')</code> - æ–°å¢æ¡ä»¶</li>
    <li><strong>åŸå› ï¼š</strong> ç‚¹å‡»è¾“å…¥æ¡†æ—¶ä¸åº”è¯¥åˆ‡æ¢æ ‡ç­¾
      <ul>
        <li>ç”¨æˆ·å¯èƒ½æƒ³ç‚¹å‡»è¾“å…¥æ¡†ç§»åŠ¨å…‰æ ‡</li>
        <li>å¦‚æœè§¦å‘åˆ‡æ¢ï¼Œä¼šä¸­æ–­ç¼–è¾‘</li>
      </ul>
    </li>
  </ul>

  <p><strong>3. è‡ªåŠ¨èšç„¦ï¼ˆç¬¬ 37-44 è¡Œï¼‰</strong></p>
  <ul>
    <li><code>setTimeout(..., 0)</code> - å»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯
      <ul>
        <li><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong> ç¡®ä¿ DOM å·²ç»æ›´æ–°å®Œæˆ</li>
        <li>å¦åˆ™ <code>getElementById()</code> å¯èƒ½æ‰¾ä¸åˆ°å…ƒç´ </li>
      </ul>
    </li>
    <li><code>input.focus()</code> - èšç„¦åˆ°è¾“å…¥æ¡†</li>
    <li><code>input.select()</code> - å…¨é€‰æ–‡æœ¬
      <ul>
        <li><strong>ç”¨æˆ·ä½“éªŒï¼š</strong> ç”¨æˆ·å¯ä»¥ç›´æ¥è¾“å…¥ï¼Œæ— éœ€æ‰‹åŠ¨é€‰ä¸­</li>
        <li>ç±»ä¼¼ Windows æ–‡ä»¶é‡å‘½åçš„è¡Œä¸º</li>
      </ul>
    </li>
  </ul>
</div>

<h3>æ”¹è¿› 5ï¼šæ–°å¢ startRenaming() å‡½æ•°</h3>

<div class="section">
  <pre><code>function startRenaming(tabId, event) {
  event.stopPropagation();  // é˜»æ­¢äº‹ä»¶å†’æ³¡
  editingTabId = tabId;     // è®¾ç½®ç¼–è¾‘çŠ¶æ€
  renderTabs();             // é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºè¾“å…¥æ¡†
}</code></pre>

  <h4>è°ƒç”¨æ—¶æœºï¼š</h4>
  <ul>
    <li>ç”¨æˆ·åŒå‡»æ ‡ç­¾åæ—¶ï¼š<code>&lt;span ... ondblclick="startRenaming(...)"&gt;</code></li>
  </ul>

  <h4>å·¥ä½œæµç¨‹ï¼š</h4>
  <ol>
    <li><code>stopPropagation()</code> - é˜»æ­¢åŒå‡»äº‹ä»¶å†’æ³¡åˆ°æ ‡ç­¾ div
      <ul>
        <li>å¦‚æœä¸é˜»æ­¢ï¼Œå¯èƒ½ä¼šè§¦å‘æ ‡ç­¾çš„ onclickï¼ˆåˆ‡æ¢æ ‡ç­¾ï¼‰</li>
      </ul>
    </li>
    <li><code>editingTabId = tabId</code> - æ ‡è®°è¯¥æ ‡ç­¾ä¸ºç¼–è¾‘çŠ¶æ€</li>
    <li><code>renderTabs()</code> - é‡æ–°æ¸²æŸ“
      <ul>
        <li>è¯¥æ ‡ç­¾ä¼šæ¸²æŸ“ä¸ºè¾“å…¥æ¡†</li>
        <li>è‡ªåŠ¨èšç„¦å¹¶å…¨é€‰æ–‡æœ¬</li>
      </ul>
    </li>
  </ol>
</div>

<h3>æ”¹è¿› 6ï¼šæ–°å¢ finishRenaming() å‡½æ•°</h3>

<div class="section">
  <pre><code>function finishRenaming(tabId) {
  const input = document.getElementById(`rename-input-${tabId}`);
  if (input) {
    const newName = input.value.trim();  // å»é™¤é¦–å°¾ç©ºæ ¼
    const tab = tabs.find(t => t.id === tabId);
    if (tab && newName) {  // ç¡®ä¿æ–°åç§°ä¸ä¸ºç©º
      tab.name = newName;  // æ›´æ–°æ ‡ç­¾åç§°
    }
  }
  editingTabId = null;  // é€€å‡ºç¼–è¾‘çŠ¶æ€
  renderTabs();         // é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºæ­£å¸¸æ ‡ç­¾
}</code></pre>

  <h4>è°ƒç”¨æ—¶æœºï¼š</h4>
  <ul>
    <li>è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼š<code>&lt;input ... onblur="finishRenaming(...)"&gt;</code></li>
    <li>ç”¨æˆ·æŒ‰ Enter é”®æ—¶ï¼ˆé€šè¿‡ <code>handleRenameKeydown()</code> è°ƒç”¨ï¼‰</li>
  </ul>

  <h4>å·¥ä½œæµç¨‹ï¼š</h4>
  <ol>
    <li>è·å–è¾“å…¥æ¡†å…ƒç´ </li>
    <li><code>trim()</code> - å»é™¤é¦–å°¾ç©ºæ ¼
      <ul>
        <li>é˜²æ­¢ç”¨æˆ·æ„å¤–è¾“å…¥ç©ºæ ¼</li>
        <li>ä¾‹å¦‚ï¼š<code>"  test.c  "</code> â†’ <code>"test.c"</code></li>
      </ul>
    </li>
    <li>æŸ¥æ‰¾å¯¹åº”çš„æ ‡ç­¾å¯¹è±¡</li>
    <li><code>if (tab && newName)</code> - åŒé‡æ£€æŸ¥
      <ul>
        <li>æ ‡ç­¾å­˜åœ¨</li>
        <li>æ–°åç§°ä¸ä¸ºç©ºï¼ˆ<code>trim()</code> åå¯èƒ½ä¸ºç©ºï¼‰</li>
      </ul>
    </li>
    <li>æ›´æ–°æ ‡ç­¾åç§°</li>
    <li><code>editingTabId = null</code> - æ¸…é™¤ç¼–è¾‘çŠ¶æ€</li>
    <li>é‡æ–°æ¸²æŸ“ï¼Œè¾“å…¥æ¡†å˜å›æ ‡ç­¾å</li>
  </ol>
</div>

<h3>æ”¹è¿› 7ï¼šæ–°å¢ handleRenameKeydown() å‡½æ•°</h3>

<div class="section">
  <pre><code>function handleRenameKeydown(event, tabId) {
  if (event.key === 'Enter') {
    event.preventDefault();    // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆé˜²æ­¢è¡¨å•æäº¤ï¼‰
    finishRenaming(tabId);     // å®Œæˆé‡å‘½å
  } else if (event.key === 'Escape') {
    event.preventDefault();
    editingTabId = null;       // å–æ¶ˆç¼–è¾‘
    renderTabs();              // æ¢å¤åŸåç§°
  }
}</code></pre>

  <h4>é”®ç›˜å¿«æ·é”®ï¼š</h4>
  <table>
    <tr>
      <th>æŒ‰é”®</th>
      <th>è¡Œä¸º</th>
      <th>è¯´æ˜</th>
    </tr>
    <tr>
      <td><code>Enter</code></td>
      <td>ç¡®è®¤é‡å‘½å</td>
      <td>ä¿å­˜æ–°åç§°ï¼Œé€€å‡ºç¼–è¾‘</td>
    </tr>
    <tr>
      <td><code>Escape</code></td>
      <td>å–æ¶ˆé‡å‘½å</td>
      <td>æ”¾å¼ƒä¿®æ”¹ï¼Œæ¢å¤åŸåç§°</td>
    </tr>
  </table>

  <h4>è¯¦ç»†è¯´æ˜ï¼š</h4>
  <ul>
    <li><strong>Enter é”®ï¼š</strong>
      <ul>
        <li><code>event.preventDefault()</code> - é˜»æ­¢é»˜è®¤è¡Œä¸º
          <ul>
            <li>åœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼ŒæŒ‰ Enter å¯èƒ½è§¦å‘è¡¨å•æäº¤</li>
            <li>è™½ç„¶æˆ‘ä»¬æ²¡æœ‰ form å…ƒç´ ï¼Œä½†ä¿é™©èµ·è§è¿˜æ˜¯é˜»æ­¢</li>
          </ul>
        </li>
        <li>è°ƒç”¨ <code>finishRenaming()</code> ä¿å­˜æ–°åç§°</li>
      </ul>
    </li>
    <li><strong>Escape é”®ï¼š</strong>
      <ul>
        <li>ç›´æ¥è®¾ç½® <code>editingTabId = null</code>ï¼Œä¸ä¿å­˜ä¿®æ”¹</li>
        <li>é‡æ–°æ¸²æŸ“ï¼Œè¾“å…¥æ¡†æ¶ˆå¤±ï¼Œæ˜¾ç¤ºåŸæ¥çš„æ ‡ç­¾å</li>
        <li><strong>ç”¨æˆ·ä½“éªŒï¼š</strong> æä¾›"åæ‚”"çš„æœºä¼š</li>
      </ul>
    </li>
  </ul>
</div>

<h3>æ”¹è¿› 8ï¼šä¿®æ”¹ä¿å­˜æŒ‰é’®é€»è¾‘</h3>

<div class="section">
  <h4>ä¿®æ”¹å‰ï¼ˆç¬¬ä¸€ç‰ˆï¼‰ï¼š</h4>
  <pre><code>const filename = document.getElementById('filenameInput').value || 'untitled.c';
// ä»è¾“å…¥æ¡†è·å–æ–‡ä»¶å</code></pre>

  <h4>ä¿®æ”¹åï¼ˆç¬¬äºŒç‰ˆï¼‰ï¼š</h4>
  <pre><code>const currentTab = tabs.find(t => t.id === currentTabId);
const filename = currentTab.name;  // ç›´æ¥ä»æ ‡ç­¾å¯¹è±¡è·å–
// ä¸å†éœ€è¦è¾“å…¥æ¡†</code></pre>

  <h4>ä¼˜ç‚¹ï¼š</h4>
  <ul>
    <li>æ•°æ®æºç»Ÿä¸€ï¼šæ–‡ä»¶ååªå­˜å‚¨åœ¨ <code>tabs</code> æ•°ç»„ä¸­</li>
    <li>å‡å°‘åŒæ­¥é—®é¢˜ï¼šä¸éœ€è¦åœ¨è¾“å…¥æ¡†å’Œæ ‡ç­¾ä¹‹é—´åŒæ­¥</li>
    <li>ä»£ç æ›´ç®€æ´</li>
  </ul>
</div>

<h2>ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡</h2>

<h3>æ“ä½œæµç¨‹å¯¹æ¯”</h3>

<div class="comparison">
  <div class="column old-version">
    <h3 style="color: #f48771;">âŒ ç¬¬ä¸€ç‰ˆæµç¨‹</h3>
    <ol>
      <li>ç‚¹å‡»æ ‡ç­¾ï¼ˆåˆ‡æ¢ï¼‰</li>
      <li>è§†çº¿ç§»åˆ°å³ä¾§</li>
      <li>ç‚¹å‡»æ–‡ä»¶åè¾“å…¥æ¡†</li>
      <li>ä¿®æ”¹æ–‡ä»¶å</li>
      <li>æŒ‰ Enter æˆ–å¤±ç„¦</li>
      <li>è§†çº¿ç§»å›å·¦ä¾§æŸ¥çœ‹æ ‡ç­¾</li>
      <li>è§†çº¿å†ç§»åˆ°å³ä¾§</li>
      <li>ç‚¹å‡»ä¿å­˜æŒ‰é’®</li>
    </ol>
    <p><strong>é—®é¢˜ï¼š</strong>è§†çº¿éœ€è¦åœ¨å·¦å³ä¸¤ä¾§æ¥å›ç§»åŠ¨3æ¬¡</p>
  </div>
  <div class="column new-version">
    <h3 style="color: #4ec9b0;">âœ… ç¬¬äºŒç‰ˆæµç¨‹</h3>
    <ol>
      <li>ç‚¹å‡»æ ‡ç­¾ï¼ˆåˆ‡æ¢ï¼‰</li>
      <li>åŒå‡»æ ‡ç­¾åï¼ˆé‡å‘½åï¼‰</li>
      <li>è¾“å…¥æ–°åç§°</li>
      <li>æŒ‰ Enter ç¡®è®¤</li>
      <li>ç‚¹å‡»æ—è¾¹çš„ä¿å­˜æŒ‰é’®</li>
    </ol>
    <p><strong>ä¼˜åŠ¿ï¼š</strong>æ‰€æœ‰æ“ä½œéƒ½åœ¨åŒä¸€è§†è§‰åŒºåŸŸå®Œæˆ</p>
  </div>
</div>

<h3>ç¬¦åˆç”¨æˆ·ä¹ æƒ¯</h3>

<table>
  <tr>
    <th>è½¯ä»¶/ç³»ç»Ÿ</th>
    <th>é‡å‘½åæ–¹å¼</th>
  </tr>
  <tr>
    <td>Windows æ–‡ä»¶ç®¡ç†å™¨</td>
    <td>ç‚¹å‡»æ–‡ä»¶å â†’ F2 é”®æˆ–å†æ¬¡ç‚¹å‡» â†’ å†…è”ç¼–è¾‘</td>
  </tr>
  <tr>
    <td>macOS Finder</td>
    <td>ç‚¹å‡»æ–‡ä»¶å â†’ Enter é”® â†’ å†…è”ç¼–è¾‘</td>
  </tr>
  <tr>
    <td>VS Code</td>
    <td>å³é”®æ ‡ç­¾ â†’ Rename / F2 â†’ å†…è”ç¼–è¾‘</td>
  </tr>
  <tr>
    <td>Chrome ä¹¦ç­¾</td>
    <td>å³é”®ä¹¦ç­¾ â†’ Edit â†’ å†…è”ç¼–è¾‘</td>
  </tr>
  <tr>
    <td><strong>CCompiler v2</strong></td>
    <td><strong>åŒå‡»æ ‡ç­¾å â†’ å†…è”ç¼–è¾‘</strong></td>
  </tr>
</table>

<p><strong>ç»“è®ºï¼š</strong>å†…è”ç¼–è¾‘æ˜¯ç°ä»£è½¯ä»¶çš„æ ‡å‡†äº¤äº’æ¨¡å¼ï¼Œç”¨æˆ·æ— éœ€å­¦ä¹ å³å¯ä½¿ç”¨ã€‚</p>

<h2>ğŸ”§ æŠ€æœ¯è¦ç‚¹æ€»ç»“</h2>

<h3>1. å†…è”ç¼–è¾‘çš„å®ç°åŸç†</h3>

<div class="section">
  <ol>
    <li><strong>çŠ¶æ€ç®¡ç†</strong>
      <ul>
        <li>ä½¿ç”¨ <code>editingTabId</code> å…¨å±€å˜é‡è·Ÿè¸ªç¼–è¾‘çŠ¶æ€</li>
        <li><code>null</code> è¡¨ç¤ºæ— ç¼–è¾‘ï¼Œæ•°å­—è¡¨ç¤ºæ­£åœ¨ç¼–è¾‘çš„æ ‡ç­¾ID</li>
      </ul>
    </li>
    <li><strong>æ¡ä»¶æ¸²æŸ“</strong>
      <ul>
        <li>æ ¹æ® <code>editingTabId</code> æ¸²æŸ“ä¸åŒçš„ DOM ç»“æ„</li>
        <li>ç¼–è¾‘æ—¶ï¼š<code>&lt;input&gt;</code></li>
        <li>æ­£å¸¸æ—¶ï¼š<code>&lt;span&gt;</code></li>
      </ul>
    </li>
    <li><strong>äº‹ä»¶é©±åŠ¨</strong>
      <ul>
        <li>åŒå‡» â†’ è¿›å…¥ç¼–è¾‘æ¨¡å¼</li>
        <li>å¤±ç„¦/Enter â†’ ä¿å­˜å¹¶é€€å‡º</li>
        <li>Escape â†’ å–æ¶ˆå¹¶é€€å‡º</li>
      </ul>
    </li>
    <li><strong>è‡ªåŠ¨èšç„¦</strong>
      <ul>
        <li>ä½¿ç”¨ <code>setTimeout(..., 0)</code> å»¶è¿Ÿèšç„¦</li>
        <li>ç¡®ä¿ DOM æ›´æ–°å®Œæˆ</li>
      </ul>
    </li>
  </ol>
</div>

<h3>2. äº‹ä»¶å¤„ç†çš„ç»†èŠ‚</h3>

<div class="section">
  <table>
    <tr>
      <th>äº‹ä»¶</th>
      <th>å¤„ç†æ–¹æ³•</th>
      <th>åŸå› </th>
    </tr>
    <tr>
      <td>åŒå‡»æ ‡ç­¾å</td>
      <td><code>stopPropagation()</code></td>
      <td>é˜²æ­¢è§¦å‘æ ‡ç­¾çš„ click äº‹ä»¶</td>
    </tr>
    <tr>
      <td>ç‚¹å‡»è¾“å…¥æ¡†</td>
      <td>è¿‡æ»¤ç‚¹å‡»äº‹ä»¶</td>
      <td>é˜²æ­¢åˆ‡æ¢æ ‡ç­¾ï¼Œä¸­æ–­ç¼–è¾‘</td>
    </tr>
    <tr>
      <td>æŒ‰ Enter</td>
      <td><code>preventDefault()</code></td>
      <td>é˜²æ­¢é»˜è®¤è¡Œä¸ºï¼ˆè¡¨å•æäº¤ï¼‰</td>
    </tr>
    <tr>
      <td>å¤±å»ç„¦ç‚¹</td>
      <td>ä¿å­˜å¹¶é€€å‡º</td>
      <td>ç”¨æˆ·ç‚¹å‡»å…¶ä»–åœ°æ–¹è§†ä¸ºç¡®è®¤</td>
    </tr>
  </table>
</div>

<h3>3. CSS çš„ä½œç”¨</h3>

<div class="section">
  <ul>
    <li><strong>ç§»é™¤ <code>margin-left: auto</code></strong>
      <ul>
        <li>ä¸å†éœ€è¦å°†å…ƒç´ æ¨åˆ°å³ä¾§</li>
        <li>æ‰€æœ‰å…ƒç´ æŒ‰è‡ªç„¶é¡ºåºæ’åˆ—</li>
      </ul>
    </li>
    <li><strong>ä¿å­˜æŒ‰é’®é¢œè‰²</strong>
      <ul>
        <li>ç»¿è‰²ï¼šè§†è§‰ä¸Šæ›´æ˜¾çœ¼ï¼Œè¡¨ç¤º"å®‰å…¨æ“ä½œ"</li>
        <li>æ‚¬åœå˜äº®ï¼šæä¾›è§†è§‰åé¦ˆ</li>
      </ul>
    </li>
    <li><strong>è¾“å…¥æ¡†æ ·å¼</strong>
      <ul>
        <li>è“è‰²è¾¹æ¡†ï¼šæ˜ç¡®è¡¨ç¤º"å¯ç¼–è¾‘"çŠ¶æ€</li>
        <li><code>font-family: inherit</code>ï¼šä¸æ ‡ç­¾å­—ä½“ä¸€è‡´</li>
      </ul>
    </li>
  </ul>
</div>

<h2>ğŸ“Š ä»£ç å˜æ›´ç»Ÿè®¡</h2>

<table>
  <tr>
    <th>æ–‡ä»¶</th>
    <th>æ–°å¢è¡Œæ•°</th>
    <th>åˆ é™¤è¡Œæ•°</th>
    <th>å‡€å˜åŒ–</th>
  </tr>
  <tr>
    <td>CCompiler.html (CSS)</td>
    <td>+15</td>
    <td>-25</td>
    <td>-10</td>
  </tr>
  <tr>
    <td>CCompiler.html (HTML)</td>
    <td>+2</td>
    <td>-6</td>
    <td>-4</td>
  </tr>
  <tr>
    <td>CCompiler.html (JS)</td>
    <td>+45</td>
    <td>-15</td>
    <td>+30</td>
  </tr>
  <tr>
    <td><strong>æ€»è®¡</strong></td>
    <td><strong>+62</strong></td>
    <td><strong>-46</strong></td>
    <td><strong>+16</strong></td>
  </tr>
</table>

<p><strong>åˆ†æï¼š</strong></p>
<ul>
  <li>CSS å‡å°‘10è¡Œï¼šç§»é™¤äº†æ–‡ä»¶åè¾“å…¥æ¡†ç›¸å…³æ ·å¼</li>
  <li>HTML å‡å°‘4è¡Œï¼šç§»é™¤äº†è¾“å…¥æ¡†å…ƒç´ </li>
  <li>JS å¢åŠ 30è¡Œï¼šæ·»åŠ äº†å†…è”ç¼–è¾‘é€»è¾‘</li>
  <li><strong>å‡€å¢åŠ ä»…16è¡Œ</strong>ï¼Œä½†ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡</li>
</ul>

<h2>âœ¨ æ€»ç»“</h2>

<div class="success">
  <h3>ç¬¬äºŒç‰ˆçš„ä¼˜åŠ¿ï¼š</h3>
  <ul>
    <li>âœ… <strong>UI æ›´ç®€æ´</strong> - ç§»é™¤äº†ä¸å¿…è¦çš„è¾“å…¥æ¡†</li>
    <li>âœ… <strong>æ“ä½œæ›´ç›´è§‚</strong> - åŒå‡»å³å¯é‡å‘½åï¼Œç¬¦åˆç”¨æˆ·ä¹ æƒ¯</li>
    <li>âœ… <strong>è§†è§‰é›†ä¸­</strong> - æ‰€æœ‰æ ‡ç­¾æ“ä½œåœ¨åŒä¸€åŒºåŸŸ</li>
    <li>âœ… <strong>è®¤çŸ¥è´Ÿæ‹…ä½</strong> - æ— éœ€åœ¨ä¸åŒUIå…ƒç´ é—´åˆ‡æ¢</li>
    <li>âœ… <strong>ä¿å­˜æŒ‰é’®æ˜¾çœ¼</strong> - ç»¿è‰²æŒ‰é’®æ›´å®¹æ˜“å‘ç°</li>
    <li>âœ… <strong>é”®ç›˜å‹å¥½</strong> - Enter ç¡®è®¤ï¼ŒEscape å–æ¶ˆ</li>
  </ul>

  <h3>å…³é”®æŠ€æœ¯ï¼š</h3>
  <ul>
    <li>ğŸ”¹ æ¡ä»¶æ¸²æŸ“ï¼ˆæ ¹æ®çŠ¶æ€æ¸²æŸ“ä¸åŒå†…å®¹ï¼‰</li>
    <li>ğŸ”¹ äº‹ä»¶å†’æ³¡æ§åˆ¶ï¼ˆ<code>stopPropagation</code>ï¼‰</li>
    <li>ğŸ”¹ è‡ªåŠ¨èšç„¦ï¼ˆ<code>setTimeout + focus + select</code>ï¼‰</li>
    <li>ğŸ”¹ é”®ç›˜äº‹ä»¶å¤„ç†ï¼ˆEnter, Escapeï¼‰</li>
    <li>ğŸ”¹ CSS Flexbox å¸ƒå±€ï¼ˆè‡ªç„¶æ’åˆ—ï¼‰</li>
  </ul>

  <h3>ä»£ç è´¨é‡ï¼š</h3>
  <ul>
    <li>âœ… å‡å°‘äº†é‡å¤ä»£ç ï¼ˆä¸éœ€è¦åŒæ­¥è¾“å…¥æ¡†å’Œæ ‡ç­¾åï¼‰</li>
    <li>âœ… æ•°æ®æºç»Ÿä¸€ï¼ˆæ–‡ä»¶ååªåœ¨ <code>tabs</code> æ•°ç»„ä¸­ï¼‰</li>
    <li>âœ… é™ä½å¤æ‚åº¦ï¼ˆç§»é™¤äº† <code>updateFilenameInput</code> å‡½æ•°ï¼‰</li>
    <li>âœ… æ›´å®¹æ˜“ç»´æŠ¤ï¼ˆé€»è¾‘æ›´æ¸…æ™°ï¼‰</li>
  </ul>
</div>

<div class="important">
  <h3>å­¦ä¹ è¦ç‚¹ï¼š</h3>
  <p>é€šè¿‡è¿™ä¸ªæ”¹è¿›æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å­¦åˆ°ï¼š</p>
  <ul>
    <li><strong>1. å¥½çš„ UI è®¾è®¡èƒ½å‡å°‘ä»£ç </strong> - ç¬¬äºŒç‰ˆåè€Œæ›´ç®€å•</li>
    <li><strong>2. ç”¨æˆ·ä¹ æƒ¯å¾ˆé‡è¦</strong> - éµå¾ªç°æœ‰è½¯ä»¶çš„äº¤äº’æ¨¡å¼</li>
    <li><strong>3. é›†ä¸­ç›¸å…³æ“ä½œ</strong> - é™ä½ç”¨æˆ·çš„è®¤çŸ¥è´Ÿæ‹…</li>
    <li><strong>4. ç»†èŠ‚å†³å®šä½“éªŒ</strong> - è‡ªåŠ¨èšç„¦ã€å…¨é€‰æ–‡æœ¬ç­‰å°ç»†èŠ‚å¾ˆé‡è¦</li>
  </ul>
</div>

</body>
</html>
