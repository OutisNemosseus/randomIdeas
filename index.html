<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>C Compiler in Browser</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      height: 100vh; display: flex; flex-direction: column;
      background: #1e1e1e; color: #d4d4d4;
    }
    header {
      padding: 1rem; background: #252526;
      border-bottom: 1px solid #3e3e42;
    }
    h1 { font-size: 1.2rem; font-weight: 500; }
    .container {
      flex: 1; display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px; background: #3e3e42;
      overflow: hidden;
    }
    .panel {
      background: #1e1e1e;
      display: flex; flex-direction: column;
    }
    .panel-header {
      padding: 0.5rem 1rem;
      background: #252526;
      border-bottom: 1px solid #3e3e42;
      font-size: 0.9rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    textarea {
      flex: 1; padding: 1rem;
      background: #1e1e1e; color: #d4d4d4;
      border: none; resize: none;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px; line-height: 1.6;
    }
    textarea:focus { outline: none; }
    pre {
      flex: 1; padding: 1rem;
      overflow: auto;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 13px; line-height: 1.6;
      white-space: pre-wrap;
    }
    button {
      padding: 0.4rem 1rem;
      background: #0e639c;
      color: white;
      border: none;
      border-radius: 2px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    button:hover { background: #1177bb; }
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    .error { color: #f48771; }
    .success { color: #4ec9b0; }
  </style>
</head>
<body>
  <header>
    <h1>üîß C Compiler (Browser-based with JSCPP)</h1>
  </header>
  
  <div class="container">
    <div class="panel">
      <div class="panel-header">
        <span>üìù C Code Editor</span>
        <button id="runBtn">‚ñ∂ Compile & Run</button>
      </div>
      <textarea id="code" spellcheck="false">#include <stdio.h>

int main() {
    printf("Hello from C in browser!\n");
    
    int sum = 0;
    for (int i = 1; i <= 10; i++) {
        sum += i;
    }
    
    printf("Sum of 1-10: %d\n", sum);
    return 0;
}</textarea>
    </div>
    
    <div class="panel">
      <div class="panel-header">üì§ Output</div>
      <pre id="output">Click "Compile & Run" to execute your code...</pre>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jscpp@1.0.5/dist/JSCPP.es5.min.js"></script>
  <script>
    const codeArea = document.getElementById('code');
    const outputArea = document.getElementById('output');
    const runBtn = document.getElementById('runBtn');

    runBtn.addEventListener('click', async () => {
      outputArea.textContent = 'Compiling and running...\n\n';
      runBtn.disabled = true;

      try {
        const code = codeArea.value;
        let output = '';

        // Configure JSCPP
        const config = {
          stdio: {
            write: (s) => { output += s; }
          }
        };

        // Run the C code
        await JSCPP.run(code, '', config);

        outputArea.textContent = output || '(Program completed with no output)';
        outputArea.className = 'success';

      } catch (error) {
        outputArea.textContent = '‚ùå Error:\n' + error.message;
        outputArea.className = 'error';
      } finally {
        runBtn.disabled = false;
      }
    });

    // Example programs
    const examples = {
      fibonacci: `#include <stdio.h>

int fibonacci(int n) {
    if (n <= 1) return n;
    return fibonacci(n-1) + fibonacci(n-2);
}

int main() {
    printf("Fibonacci sequence:\\n");
    for (int i = 0; i < 10; i++) {
        printf("F(%d) = %d\\n", i, fibonacci(i));
    }
    return 0;
}`,
      
      array: `#include <stdio.h>

int main() {
    int arr[] = {5, 2, 8, 1, 9};
    int n = 5;
    
    printf("Original array: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    
    // Bubble sort
    for (int i = 0; i < n-1; i++) {
        for (int j = 0; j < n-i-1; j++) {
            if (arr[j] > arr[j+1]) {
                int temp = arr[j];
                arr[j] = arr[j+1];
                arr[j+1] = temp;
            }
        }
    }
    
    printf("\\nSorted array: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\\n");
    
    return 0;
}`
    };

    // Add keyboard shortcut: Ctrl+Enter or Cmd+Enter to run
    codeArea.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        runBtn.click();
      }
    });
  </script>
</body>
</html>